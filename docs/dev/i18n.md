# 국제화 (i18n) 가이드

이 프로젝트는 `react-i18next`를 사용하여 국제화를 지원합니다.

## 아키텍처

React + PixiJS 환경에서 i18n을 사용하는 방법:

1. **React 레이어**: `react-i18next`로 번역 관리
2. **PixiJS 레이어**: React에서 번역된 텍스트를 props로 전달

```
React Component (useTranslation)
    ↓
  번역된 텍스트
    ↓
PixiJS Text Component (props)
```

## 설치된 패키지

- `i18next`: 핵심 i18n 프레임워크
- `react-i18next`: React 통합 라이브러리

## 디렉토리 구조

```
src/
├── i18n/
│   ├── config.ts           # i18n 설정 및 초기화
│   ├── types.ts            # TypeScript 타입 선언
│   └── locales/
│       └── ko.json         # 한국어 번역 파일
```

## 사용 방법

### 1. 번역 파일 작성

[src/i18n/locales/ko.json](../src/i18n/locales/ko.json)에 번역 추가:

```json
{
  "app": {
    "title": "Tailbound",
    "welcome": "환영합니다"
  },
  "common": {
    "loading": "로딩 중...",
    "error": "오류가 발생했습니다"
  }
}
```

### 2. React 컴포넌트에서 사용

```typescript
import { useTranslation } from 'react-i18next';

export default function MyComponent() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('app.title')}</h1>
      <p>{t('app.welcome')}</p>
    </div>
  );
}
```

### 3. PixiJS 컴포넌트에 번역 전달

```typescript
import { useTranslation } from 'react-i18next';
import { Text } from 'pixi.js';

function MyPixiText() {
  const { t } = useTranslation();
  const titleText = t('app.title'); // React에서 번역

  return (
    <pixiText
      text={titleText}  // PixiJS에 전달
      x={100}
      y={100}
    />
  );
}
```

## TypeScript 지원

[src/i18n/types.ts](../src/i18n/types.ts)에서 타입 선언:

```typescript
import 'react-i18next';
import ko from './locales/ko.json';

declare module 'react-i18next' {
  interface CustomTypeOptions {
    defaultNS: 'translation';
    resources: {
      translation: typeof ko;
    };
  }
}
```

이를 통해 `t()` 함수 사용 시 자동완성과 타입 체크를 지원합니다.

## 새로운 언어 추가하기

현재는 한국어(ko)만 지원하지만, 나중에 다른 언어를 추가할 수 있습니다:

1. `src/i18n/locales/en.json` 생성
2. `src/i18n/config.ts`에서 언어 추가:

```typescript
import en from './locales/en.json';
import ko from './locales/ko.json';

i18n.use(initReactI18next).init({
  resources: {
    ko: { translation: ko },
    en: { translation: en }, // 추가
  },
  lng: 'ko',
  fallbackLng: 'ko',
  // ...
});
```

3. 언어 전환 UI 구현:

```typescript
import { useTranslation } from 'react-i18next';

function LanguageSwitcher() {
  const { i18n } = useTranslation();

  return (
    <select
      value={i18n.language}
      onChange={(e) => i18n.changeLanguage(e.target.value)}
    >
      <option value="ko">한국어</option>
      <option value="en">English</option>
    </select>
  );
}
```

## 베스트 프랙티스

### 1. 네임스페이스 사용

번역 키를 카테고리별로 구조화:

```json
{
  "app": { ... },
  "common": { ... },
  "game": { ... }
}
```

### 2. 변수 보간 (Interpolation)

동적 값 삽입:

```json
{
  "greeting": "안녕하세요, {{name}}님!"
}
```

```typescript
t('greeting', { name: '홍길동' }) // "안녕하세요, 홍길동님!"
```

### 3. 복수형 처리

```json
{
  "items": "아이템 {{count}}개",
  "items_other": "아이템 {{count}}개"
}
```

```typescript
t('items', { count: 5 }) // "아이템 5개"
```

### 4. 번역 키 관리

- 일관된 네이밍 컨벤션 사용
- 너무 긴 키는 피하기
- 의미를 명확하게 표현

## 테스트

i18n을 사용하는 컴포넌트 테스트:

```typescript
import { render } from '@testing-library/react';
import { I18nextProvider } from 'react-i18next';
import i18n from './i18n/config';

describe('MyComponent', () => {
  it('renders translated text', () => {
    const { getByText } = render(
      <I18nextProvider i18n={i18n}>
        <MyComponent />
      </I18nextProvider>
    );

    expect(getByText('환영합니다')).toBeInTheDocument();
  });
});
```

## 참고 자료

- [react-i18next 공식 문서](https://react.i18next.com/)
- [i18next 공식 문서](https://www.i18next.com/)
- [PixiJS 공식 문서](https://pixijs.com/)
