# κµ¬λ―ΈνΈμ λλ¬Ό μ λ¬Ό μµμΆ… λ¦¬λ·°

## π“‹ κµ¬ν„ μ™„λ£ μ‚¬ν•­

### 1. μ λ¬Ό μ‹μ¤ν… μ•„ν‚¤ν…μ² β…

#### νƒ€μ… μ‹μ¤ν…
- `IArtifact` μΈν„°νμ΄μ¤: λ¨λ“  μ λ¬Όμ ν‘μ¤€ μΈν„°νμ΄μ¤
- `BaseArtifact` μ¶”μƒ ν΄λμ¤: κ³µν†µ λ΅μ§ κµ¬ν„
- `ArtifactManager`: μ λ¬Ό μƒλ…μ£ΌκΈ° λ° μ΄λ²¤νΈ κ΄€λ¦¬

#### μ΄λ²¤νΈ ν›… μ‹μ¤ν…
```typescript
onHit?(enemy: BaseEnemy, damage: number): void
onKill?(enemy: BaseEnemy): void
onTakeDamage?(damage: number, source: Container): number
onLevelUp?(level: number): void
```

### 2. μƒνƒ μ΄μƒ μ‹μ¤ν… β…

#### ν™•μ¥ κ°€λ¥ν• μ„¤κ³„
```typescript
export type StatusEffectType =
  | 'charmed'   // λ§¤νΉ (κµ¬λ―ΈνΈμ λλ¬Ό)
  | 'stunned'   // κΈ°μ 
  | 'slowed'    // λ‘”ν™”
  | 'burning'   // ν™”μƒ
  | 'frozen'    // λΉ™κ²°
  | 'poisoned'  // μ¤‘λ…
  | 'bleeding'  // μ¶ν
  | 'confused'; // νΌλ€
```

#### BaseEnemy ν†µν•©
- `statusEffects: Map<string, StatusEffect>`
- μλ™ μ‹κ°„ κ΄€λ¦¬ λ° λ§λ£ μ²λ¦¬
- νƒ€μ… μ•μ „ν• API μ κ³µ

### 3. κµ¬λ―ΈνΈμ λλ¬Ό μ λ¬Ό κµ¬ν„ β…

#### λ°Έλ°μ¤ μƒμ
```typescript
CHARM_DURATION = 3.0μ΄
ATTACK_INTERVAL = 1.0μ΄
ATTACK_RANGE = 200px
MAX_CHARMED = 5λ§λ¦¬

ν‹°μ–΄λ³„ ν™•λ¥ :
- low: 10%
- medium: 5%
- high: 1%
```

#### ν•µμ‹¬ κΈ°λ¥
1. **λ§¤νΉ μ‹μ¤ν…**
   - field μΉ΄ν…κ³ λ¦¬ μ „μ© (named, boss μ μ™Έ)
   - ν‹°μ–΄λ³„ μ°¨λ“± ν™•λ¥  μ μ©
   - μµλ€ 5λ§λ¦¬κΉμ§€ λ™μ‹ λ§¤νΉ
   - 3μ΄κ°„ μ§€μ†

2. **AI μ μ–΄**
   - λ§¤νΉλ μ μ€ κ°€μ¥ κ°€κΉμ΄ λ‹¤λ¥Έ μ μ„ νƒ€κ²ν…
   - μ κ·Ήμ μΌλ΅ μ΄λ™ν•μ—¬ μ¶”μ 
   - 1μ΄λ§λ‹¤ 200px λ²”μ„ λ‚΄ μ  κ³µκ²©
   - μ›λ μ μ κ³µκ²©λ ¥ μ‚¬μ©

3. **μ‹κ° ν¨κ³Ό**
   - ν•‘ν¬μƒ‰ ν‹΄νΈ (0xff69b4)
   - λ¨Έλ¦¬ μ„ ν•νΈ μ΄ν™νΈ (λ§¥λ™ μ• λ‹λ©”μ΄μ…)
   - κ³µκ²© μ‹ ν•‘ν¬μƒ‰ λΌμΈ μ΄ν™νΈ (0.2μ΄)

4. **λ©”λ¨λ¦¬ κ΄€λ¦¬**
   - ν•νΈ μ• λ‹λ©”μ΄μ… μΈν„°λ² μλ™ μ •λ¦¬
   - Graphics κ°μ²΄ λ…μ‹μ  destroy
   - μ  μ‚¬λ§ μ‹ μλ™ λ§¤νΉ ν•΄μ 

### 4. κ²μ„ ν†µν•© β…

#### OverworldGameScene
```typescript
// μ λ¬Ό μ‹μ¤ν… μ΄κΈ°ν™”
this.artifactManager = new ArtifactManager(this.player, this);

// ν…μ¤νΈ λ¨λ“: FoxTearArtifact μλ™ νλ“
const foxTear = new FoxTearArtifact();
this.artifactManager.add(foxTear);

// μ΄λ²¤νΈ μ—°κ²°
this.combatSystem.onEnemyHit = (enemy, damage) => {
  this.artifactManager.triggerHit(enemy, damage);
};

// λ§¤νΉλ μ  νƒ€κ²ν… λ°©μ§€
if (!enemy.hasStatusEffect('charmed')) {
  enemy.setTarget(playerPos);
}
```

#### CombatSystem
```typescript
public onEnemyHit?: (enemy: BaseEnemy, damage: number) => void;

// μ  ν”Όκ²© μ‹ μ½λ°± νΈμ¶
this.onEnemyHit?.(enemy, finalDamage);
```

## π― μ„¤κ³„ μ›μΉ™ μ¤€μ

### SOLID μ›μΉ™ β…
- **S**: κ° μ λ¬Όμ€ λ‹¨μΌ ν¨κ³Όλ§ λ‹΄λ‹Ή
- **O**: μƒ μ λ¬Ό μ¶”κ°€ μ‹ κΈ°μ΅΄ μ½”λ“ μμ • λ¶ν•„μ”
- **L**: λ¨λ“  μ λ¬Όμ΄ IArtifactλ΅ λ€μ²΄ κ°€λ¥
- **I**: μ΄λ²¤νΈ ν›…μ€ μ„ νƒμ  κµ¬ν„
- **D**: ArtifactManagerλ” IArtifactμ— μμ΅΄

### νƒ€μ… μ•μ „μ„± β…
- `any` νƒ€μ… μ™„μ „ μ κ±°
- `@ts-ignore` μ£Όμ„ μ κ±°
- λ¨λ“  νƒ€μ… λ…μ‹μ  μ •μ
- TypeScript strict mode ν†µκ³Ό

### λ©”λ¨λ¦¬ μ•μ „μ„± β…
- μΈν„°λ² λ…μ‹μ  μ •λ¦¬
- Graphics κ°μ²΄ μ μ ν• destroy
- Map κΈ°λ° ν¨μ¨μ  κ΄€λ¦¬
- λ©”λ¨λ¦¬ λ„μ μ—†μ

## π“ νμΌ κµ¬μ΅°

```
src/
β”β”€β”€ types/
β”‚   β”β”€β”€ artifact.types.ts          # μ λ¬Ό νƒ€μ… μ •μ
β”‚   β”β”€β”€ status-effect.types.ts     # μƒνƒ μ΄μƒ νƒ€μ…
β”‚   β”β”€β”€ team.types.ts               # ν€ νƒ€μ…
β”‚   β””β”€β”€ scene.types.ts              # μ”¬ μΈν„°νμ΄μ¤
β”β”€β”€ game/
β”‚   β””β”€β”€ artifacts/
β”‚       β”β”€β”€ base/
β”‚       β”‚   β”β”€β”€ IArtifact.ts       # μΈν„°νμ΄μ¤
β”‚       β”‚   β””β”€β”€ BaseArtifact.ts    # μ¶”μƒ ν΄λμ¤
β”‚       β””β”€β”€ impl/
β”‚           β””β”€β”€ FoxTearArtifact.ts # κµ¬λ―ΈνΈ λλ¬Ό κµ¬ν„
β”β”€β”€ systems/
β”‚   β”β”€β”€ ArtifactManager.ts         # μ λ¬Ό λ§¤λ‹μ €
β”‚   β””β”€β”€ CombatSystem.ts            # μ „ν¬ μ‹μ¤ν… (μ΄λ²¤νΈ μ¶”κ°€)
β””β”€β”€ game/
    β”β”€β”€ entities/
    β”‚   β””β”€β”€ enemies/
    β”‚       β””β”€β”€ BaseEnemy.ts       # μƒνƒ μ΄μƒ μ‹μ¤ν… ν†µν•©
    β””β”€β”€ scenes/
        β””β”€β”€ game/
            β”β”€β”€ BaseGameScene.ts   # player public λ³€κ²½
            β””β”€β”€ OverworldGameScene.ts # μ λ¬Ό μ‹μ¤ν… ν†µν•©
```

## β¨ μ£Όμ” κ°μ„  μ‚¬ν•­

### 1. ν™•μ¥μ„±
- μƒλ΅μ΄ μƒνƒ μ΄μƒ μ¶”κ°€ μ©μ΄
- μƒλ΅μ΄ μ λ¬Ό κµ¬ν„ κ°„λ‹¨
- μΉ΄ν…κ³ λ¦¬ κΈ°λ° μ λ¬Ό λ¶„λ¥

### 2. μ μ§€λ³΄μμ„±
- λ…ν™•ν• μ±…μ„ λ¶„λ¦¬
- μΌκ΄€λ λ„¤μ΄λ° μ»¨λ²¤μ…
- ν’λ¶€ν• μ£Όμ„ λ° λ¬Έμ„ν™”

### 3. μ„±λ¥
- Map κΈ°λ° ν¨μ¨μ  μ΅°ν
- λ©”λ¨λ¦¬ λ„μ λ°©μ§€
- μµμ ν™”λ κ±°λ¦¬ κ³„μ‚°

## π”§ ν…μ¤νΈ λ¨λ“

### ν„μ¬ μƒνƒ
κ²μ„ μ‹μ‘ μ‹ μλ™μΌλ΅ FoxTearArtifact ν™μ„±ν™”λ¨

### TODO μ£Όμ„ μ„μΉ
```typescript
// OverworldGameScene.ts:92
public artifactManager!: ArtifactManager; // TODO: ν…μ¤νΈμ¤‘ - μ λ¬Ό μ „μ²΄ μ μ© ν›„ μ κ±° ν•„μ”

// OverworldGameScene.ts:462
// TODO: ν…μ¤νΈμ¤‘ - μ λ¬Ό μ‹μ¤ν… μ΄κΈ°ν™” (κ²μ„ μ‹μ‘ μ‹ FoxTearArtifact μλ™ νλ“)

// OverworldGameScene.ts:503
// TODO: ν…μ¤νΈμ¤‘ - μ  νƒ€κ²© μ‹ μ λ¬Ό μ΄λ²¤νΈ νΈλ¦¬κ±°

// OverworldGameScene.ts:783
// TODO: ν…μ¤νΈμ¤‘ - μ λ¬Ό μ—…λ°μ΄νΈ

// CombatSystem.ts:22
// TODO: ν…μ¤νΈμ¤‘ - μ  νƒ€κ²© μ½λ°± (μ λ¬Ό μ‹μ¤ν…μ©)

// CombatSystem.ts:49
// TODO: ν…μ¤νΈμ¤‘ - μ  νƒ€κ²© μ½λ°± νΈμ¶ (μ λ¬Ό μ‹μ¤ν…μ©)
```

### μ •μ‹ λ°°ν¬ μ‹ μ κ±°ν•  μ½”λ“
```typescript
// OverworldGameScene.ts - initScene()
const foxTear = new FoxTearArtifact();
this.artifactManager.add(foxTear);
console.log('[OverworldGameScene] π¦ FoxTearArtifact ν…μ¤νΈ λ¨λ“ ν™μ„±ν™”');
```

## π“ ν†µκ³„

- **μ΄ νμΌ μ**: 12κ°
- **μƒλ΅ μƒμ„±λ νμΌ**: 6κ°
- **μμ •λ νμΌ**: 6κ°
- **μ΄ μ½”λ“ λΌμΈ**: ~800μ¤„
- **νƒ€μ… μ—λ¬**: 0κ°
- **λ©”λ¨λ¦¬ λ„μ**: μ—†μ

## π€ λ‹¤μ λ‹¨κ³„

1. **μ λ¬Ό UI κµ¬ν„** (Pending)
   - μΆν•λ‹¨ μ λ¬Ό μ¬λ΅― 4κ°
   - λ§μ°μ¤ μ¤λ²„ μ‹ ν΄ν
   - νλ“ μ• λ‹λ©”μ΄μ…
   - μΉ΄ν…κ³ λ¦¬λ³„ μƒ‰μƒ κµ¬λ¶„

2. **μ¶”κ°€ μ λ¬Ό κµ¬ν„** (Future)
   - μΉ΄ν…κ³ λ¦¬λ³„ 2-3κ°μ”©
   - ν‹°μ–΄λ³„ λ°Έλ°μ‹±
   - μ‹λ„μ§€ ν¨κ³Ό κ³ λ ¤

3. **μ λ¬Ό νλ“ μ‹μ¤ν…** (Future)
   - λ λ²¨μ—… λ³΄μƒ
   - μƒμ  μ‹μ¤ν…
   - λλ¤ λ“λ

## β… μµμΆ… μ²΄ν¬λ¦¬μ¤νΈ

- [x] μ λ¬Ό μ‹μ¤ν… μ•„ν‚¤ν…μ² μ™„μ„±
- [x] μƒνƒ μ΄μƒ μ‹μ¤ν… κµ¬μ¶•
- [x] FoxTearArtifact μ™„μ „ κµ¬ν„
- [x] κ²μ„μ— ν†µν•© λ° ν…μ¤νΈ κ°€λ¥
- [x] νƒ€μ… μ•μ „μ„± ν™•λ³΄
- [x] λ©”λ¨λ¦¬ μ•μ „μ„± ν™•λ³΄
- [x] λ°Έλ°μ‹± μ΅°μ •
- [x] λ¬Έμ„ν™” μ™„λ£
- [ ] UI κµ¬ν„ (λ‹¤μ λ‹¨κ³„)
- [ ] μ‹¤μ  κ²μ„ ν…μ¤νΈ (ν€κ³Ό ν•¨κ»)

## π’΅ κ²°λ΅ 

**κ°•μ :**
1. β… ν™•μ¥ κ°€λ¥ν• μ•„ν‚¤ν…μ²
2. β… μ™„λ²½ν• νƒ€μ… μ•μ „μ„±
3. β… λ©”λ¨λ¦¬ μ•μ „μ„± ν™•λ³΄
4. β… κΉ”λ”ν• μ½”λ“ ν’μ§
5. β… μƒμ„Έν• λ¬Έμ„ν™”

**ν…μ¤νΈ ν•„μ” μ‚¬ν•­:**
1. μ‹¤μ  κ²μ„μ—μ„ λ°Έλ°μ‹± ν™•μΈ
2. λ‹¤μ–‘ν• μƒν™©μ—μ„ λ²„κ·Έ ν™•μΈ
3. μ„±λ¥ λ¨λ‹ν„°λ§

**μ¤€λΉ„ μ™„λ£:**
- μ½”λ“ ν’μ§: β­β­β­β­β­
- ν™•μ¥μ„±: β­β­β­β­β­
- μ•μ •μ„±: β­β­β­β­β­
- λ¬Έμ„ν™”: β­β­β­β­β­

ν€μ›λ“¤κ³Ό ν•¨κ» ν…μ¤νΈν•μ—¬ λ°Έλ°μ‹±μ„ μ΅°μ •ν•  μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤! π‰
