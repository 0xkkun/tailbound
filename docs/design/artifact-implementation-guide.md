# ìœ ë¬¼ êµ¬í˜„ ê°€ì´ë“œ

> ìƒˆë¡œìš´ ìœ ë¬¼ì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ê³¼ ë¬´ê¸° ì§„í™” ì‹œìŠ¤í…œ ì—°ë™ ê°€ì´ë“œ

---

## ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ìœ ë¬¼ ì¶”ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸](#ìœ ë¬¼-ì¶”ê°€-ì²´í¬ë¦¬ìŠ¤íŠ¸)
3. [ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ](#ë‹¨ê³„ë³„-êµ¬í˜„-ê°€ì´ë“œ)
4. [ìœ ë¬¼ íƒ€ì…ë³„ êµ¬í˜„ ë°©ë²•](#ìœ ë¬¼-íƒ€ì…ë³„-êµ¬í˜„-ë°©ë²•)
5. [ë¬´ê¸° ì§„í™” ìœ ë¬¼ êµ¬í˜„](#ë¬´ê¸°-ì§„í™”-ìœ ë¬¼-êµ¬í˜„)
6. [ì˜ˆì œ ì½”ë“œ](#ì˜ˆì œ-ì½”ë“œ)

---

## ê°œìš”

### ìœ ë¬¼ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   game/artifacts/base/IArtifact.ts      â”‚
â”‚   - ìœ ë¬¼ ì¸í„°í˜ì´ìŠ¤ ì •ì˜                 â”‚
â”‚   - ì´ë²¤íŠ¸ í›… ì‹œê·¸ë‹ˆì²˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   game/artifacts/base/BaseArtifact.ts   â”‚
â”‚   - ê³µí†µ ë¡œì§ êµ¬í˜„                       â”‚
â”‚   - activate/deactivate                  â”‚
â”‚   - ê¸°ë³¸ update ë£¨í”„                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   game/artifacts/list/[Name].ts         â”‚
â”‚   - ê°œë³„ ìœ ë¬¼ ë¡œì§ êµ¬í˜„                  â”‚
â”‚   - ì´ë²¤íŠ¸ í›… ì˜¤ë²„ë¼ì´ë“œ                 â”‚
â”‚   - ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ì •ì˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   systems/ArtifactSystem.ts             â”‚
â”‚   - ìœ ë¬¼ ìƒëª…ì£¼ê¸° ê´€ë¦¬                   â”‚
â”‚   - ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°ë§                      â”‚
â”‚   - í”Œë ˆì´ì–´/ì”¬ ì—°ë™                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ê³„ ì›ì¹™

1. **ì´ë²¤íŠ¸ ê¸°ë°˜ ì„¤ê³„**: ê²Œì„ ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ëŠ” í›…(hook) íŒ¨í„´ ì‚¬ìš©
2. **ìƒíƒœ ìº¡ìŠí™”**: ìœ ë¬¼ ë‚´ë¶€ ìƒíƒœëŠ” privateìœ¼ë¡œ ê´€ë¦¬
3. **ë©”ëª¨ë¦¬ ì•ˆì „**: cleanup() ë©”ì„œë“œë¡œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ë³´ì¥
4. **í™•ì¥ ê°€ëŠ¥**: ìƒˆ ìœ ë¬¼ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”

---

## ìœ ë¬¼ ì¶”ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1. íŒŒì¼ ìƒì„±
- [ ] `src/game/artifacts/list/[YourArtifact].ts` ìƒì„±
- [ ] `src/config/assets.config.ts`ì— ì•„ì´ì½˜ ê²½ë¡œ ì¶”ê°€
- [ ] `public/assets/artifacts/[artifact-icon].png` ì¶”ê°€ (32x32 ê¶Œì¥)

### 2. ë°ì´í„° ì •ì˜
- [ ] `ArtifactData` ë©”íƒ€ë°ì´í„° ì‘ì„± (id, name, tier, rarity, description)
- [ ] ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ì •ì˜ (private readonly)
- [ ] ì¹´í…Œê³ ë¦¬ ì„¤ì • (offensive, defensive, utility, debuff)

### 3. ë¡œì§ êµ¬í˜„
- [ ] í•„ìš”í•œ ì´ë²¤íŠ¸ í›… êµ¬í˜„ (onHit, onKill, update ë“±)
- [ ] ì´í™íŠ¸/ì‹œê° íš¨ê³¼ ì¶”ê°€
- [ ] cleanup() ë©”ì„œë“œë¡œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬

### 4. ê²Œì„ ì”¬ ë“±ë¡
- [ ] `OverworldGameScene.ts`ì— ìœ ë¬¼ í´ë˜ìŠ¤ import
- [ ] `initializeArtifacts()` ë©”ì„œë“œì— ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€
- [ ] ë””ë²„ê·¸ìš© ì¦‰ì‹œ íšë“ ì½”ë“œ ì¶”ê°€ (ì„ íƒ)

### 5. í…ŒìŠ¤íŠ¸
- [ ] ìœ ë¬¼ íšë“ ì‹œ activate ë™ì‘ í™•ì¸
- [ ] ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±° ì •ìƒ ì‘ë™ í™•ì¸
- [ ] cleanup ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ëŠ”ì§€ í™•ì¸
- [ ] ê²Œì„ ë°¸ëŸ°ìŠ¤ í…ŒìŠ¤íŠ¸

---

## ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ

### Step 1: íŒŒì¼ ìƒì„± ë° ê¸°ë³¸ êµ¬ì¡°

```typescript
/**
 * [ìœ ë¬¼ ì´ë¦„] ìœ ë¬¼
 * [ê°„ë‹¨í•œ ì„¤ëª… - í•œ ì¤„]
 */

import { LOCAL_ASSETS } from '@config/assets.config';
import type { WeaponCategory } from '@game/data/weapons';
import type { BaseEnemy } from '@game/entities/enemies/BaseEnemy';

import { BaseArtifact } from '../base/BaseArtifact';

export class YourArtifactName extends BaseArtifact {
  // ====== ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ======
  private readonly SOME_VALUE = 10;

  constructor() {
    super({
      id: 'your_artifact_id',
      name: 'ìœ ë¬¼ ì´ë¦„',
      tier: 2,
      rarity: 'rare',
      category: 'offensive',
      description: 'ìœ ë¬¼ ì„¤ëª… (íš¨ê³¼, ìˆ˜ì¹˜ í¬í•¨)',
      iconPath: LOCAL_ASSETS.yourArtifactIcon,
      color: 0xff0000, // ì‹œê° íš¨ê³¼ ìƒ‰ìƒ (hex)
    });
  }
}
```

### Step 2: ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ì •ì˜

**ê¶Œì¥ íŒ¨í„´**: ìƒìˆ˜ëŠ” `private readonly`ë¡œ ì„ ì–¸í•˜ì—¬ ë¶ˆë³€ì„± ë³´ì¥

```typescript
export class YourArtifact extends BaseArtifact {
  // ====== ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ======
  private readonly DAMAGE_MULTIPLIER = 1.5;  // 150% ë°ë¯¸ì§€
  private readonly TRIGGER_CHANCE = 0.1;     // 10% í™•ë¥ 
  private readonly DURATION = 3.0;           // 3ì´ˆ ì§€ì†
  private readonly MAX_TARGETS = 5;          // ìµœëŒ€ 5ê°œ ëŒ€ìƒ

  // ... ìƒì„±ì
}
```

### Step 3: ì´ë²¤íŠ¸ í›… êµ¬í˜„

#### ì‚¬ìš© ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ í›…

| í›… | í˜¸ì¶œ ì‹œì  | ì‚¬ìš© ì˜ˆì‹œ |
|---|---|---|
| `onHit(enemy, damage, weaponCategories?)` | ì ì„ ê³µê²©í•  ë•Œë§ˆë‹¤ | ë””ë²„í”„, ì¶”ê°€ í”¼í•´, í™•ë¥  íš¨ê³¼ |
| `onKill(enemy)` | ì ì„ ì²˜ì¹˜í–ˆì„ ë•Œ | ì²´ë ¥ íšŒë³µ, ë²„í”„, í­ë°œ íš¨ê³¼ |
| `onTakeDamage(damage, source)` | í”Œë ˆì´ì–´ê°€ í”¼ê²©ë‹¹í•  ë•Œ | ë°©ì–´ë§‰, í”¼í•´ ê°ì†Œ, ë°˜ì‚¬ |
| `onLevelUp(level)` | í”Œë ˆì´ì–´ ë ˆë²¨ì—… ì‹œ | ìŠ¤íƒ¯ ì¦ê°€, íŠ¹ìˆ˜ ëŠ¥ë ¥ í•´ê¸ˆ |
| `update(delta)` | ë§¤ í”„ë ˆì„ (60fps) | ì§€ì† íš¨ê³¼, íƒ€ì´ë¨¸, ì¿¨ë‹¤ìš´ |

#### onHit êµ¬í˜„ ì˜ˆì‹œ (ì¡°ê±´ë¶€ íš¨ê³¼)

```typescript
public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
  // 1. ë¬´ê¸° ì¹´í…Œê³ ë¦¬ í•„í„°ë§ (íˆ¬ì‚¬ì²´ë§Œ ë°œë™)
  if (!weaponCategories || !weaponCategories.includes('projectile')) {
    return;
  }

  // 2. ëŒ€ìƒ ê²€ì¦ (ë³´ìŠ¤ëŠ” ì œì™¸)
  if (enemy.category === 'boss') return;

  // 3. í™•ë¥  ì²´í¬
  if (Math.random() >= this.TRIGGER_CHANCE) return;

  // 4. íš¨ê³¼ ì ìš©
  this.applyEffect(enemy);
}
```

#### update êµ¬í˜„ ì˜ˆì‹œ (ì§€ì† íš¨ê³¼)

```typescript
export class YourArtifact extends BaseArtifact {
  private activeEffects: Map<BaseEnemy, number> = new Map();

  public update(delta: number): void {
    const toRemove: BaseEnemy[] = [];

    for (const [enemy, remainingTime] of this.activeEffects.entries()) {
      // íƒ€ì´ë¨¸ ê°ì†Œ
      const newTime = remainingTime - delta;

      if (newTime <= 0 || !enemy.isAlive()) {
        toRemove.push(enemy);
      } else {
        this.activeEffects.set(enemy, newTime);
        // ë§¤ í”„ë ˆì„ íš¨ê³¼ ì ìš©
        this.applyPerFrameEffect(enemy, delta);
      }
    }

    // ë§Œë£Œëœ íš¨ê³¼ ì •ë¦¬
    for (const enemy of toRemove) {
      this.removeEffect(enemy);
    }
  }
}
```

### Step 4: cleanup() êµ¬í˜„ (ë©”ëª¨ë¦¬ ì•ˆì „)

**í•„ìˆ˜**: ëª¨ë“  ë‚´ë¶€ ìƒíƒœë¥¼ ì •ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

```typescript
public cleanup(): void {
  super.cleanup(); // ë¶€ëª¨ í´ë˜ìŠ¤ cleanup í˜¸ì¶œ

  // íƒ€ì´ë¨¸ ì •ë¦¬
  if (this.intervalId !== null) {
    clearInterval(this.intervalId);
    this.intervalId = null;
  }

  // ì‹œê° íš¨ê³¼ ì œê±°
  for (const effect of this.activeEffects.values()) {
    if (!effect.destroyed) {
      effect.destroy();
    }
  }

  // ì»¬ë ‰ì…˜ ë¹„ìš°ê¸°
  this.activeEffects.clear();
}
```

### Step 5: ê²Œì„ ì”¬ì— ë“±ë¡

**íŒŒì¼**: `src/game/scenes/game/OverworldGameScene.ts`

```typescript
// 1. Import ì¶”ê°€
import { YourArtifact } from '@game/artifacts/list/YourArtifact';

// 2. initializeArtifacts() ë©”ì„œë“œì— ì¶”ê°€
private initializeArtifacts(): void {
  this.artifactSystem.registerArtifact(new YourArtifact());
  // ... ê¸°ì¡´ ìœ ë¬¼ë“¤
}

// 3. ë””ë²„ê·¸ìš© ì¦‰ì‹œ íšë“ (ì„ íƒ)
if (DEBUG_MODE) {
  this.artifactSystem.grantArtifact('your_artifact_id', this.player, this);
}
```

---

## ìœ ë¬¼ íƒ€ì…ë³„ êµ¬í˜„ ë°©ë²•

### 1. Offensive (ê³µê²©í˜•)

**íŠ¹ì§•**: ë°ë¯¸ì§€ ì¦ê°€, ì¹˜ëª…íƒ€, ì¶”ê°€ íš¨ê³¼

**ì˜ˆì‹œ**: ì²˜í˜•ì¸ì˜ ë„ë¼ (ì²´ë ¥ ë‚®ì€ ì  ì¦‰ì‚¬)

```typescript
export class ExecutionerAxeArtifact extends BaseArtifact {
  private readonly EXECUTE_THRESHOLD = 0.2; // 20% ì´í•˜

  public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
    // ê·¼ì ‘ ë¬´ê¸°ë§Œ
    if (!weaponCategories?.includes('melee')) return;

    // í•„ë“œëª¹ë§Œ (ë³´ìŠ¤ ì œì™¸)
    if (enemy.category !== 'field') return;

    // ì²´ë ¥ ì²´í¬
    const healthRatio = enemy.health / enemy.maxHealth;
    if (healthRatio > this.EXECUTE_THRESHOLD) return;

    // ì¦‰ì‚¬ ì²˜ë¦¬
    enemy.takeDamage(enemy.health, true);
    this.showExecuteEffect(enemy);
  }
}
```

### 2. Debuff (ë””ë²„í”„í˜•)

**íŠ¹ì§•**: ì  ì•½í™”, ìƒíƒœ ì´ìƒ, êµ°ì¤‘ ì œì–´

**ì˜ˆì‹œ**: êµ¬ë¯¸í˜¸ì˜ ëˆˆë¬¼ (ë§¤í˜¹ íš¨ê³¼)

```typescript
export class FoxTearArtifact extends BaseArtifact {
  private readonly CHARM_DURATION = 5.0;
  private readonly CHARM_CHANCE = 0.1;
  private charmedEnemies: Map<BaseEnemy, CharmData> = new Map();

  public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
    // íˆ¬ì‚¬ì²´ë§Œ
    if (!weaponCategories?.includes('projectile')) return;

    // í™•ë¥  ì²´í¬
    if (Math.random() >= this.CHARM_CHANCE) return;

    // ìƒíƒœ ì´ìƒ ì ìš©
    const statusEffect: StatusEffect = {
      type: 'charmed',
      duration: this.CHARM_DURATION,
      startTime: performance.now(),
      source: this.data.id,
    };

    enemy.addStatusEffect(statusEffect);
    enemy.team = 'charmed'; // íŒ€ ì „í™˜

    this.charmedEnemies.set(enemy, {...});
  }

  public update(delta: number): void {
    // ë§¤í˜¹ëœ ì ë“¤ì˜ í–‰ë™ ì œì–´
    for (const [enemy, data] of this.charmedEnemies.entries()) {
      if (!enemy.hasStatusEffect('charmed')) {
        this.removeCharm(enemy);
        continue;
      }

      // ì•„êµ°ìœ¼ë¡œ ì „í™˜ëœ ì ì´ ë‹¤ë¥¸ ì  ê³µê²©
      this.updateCharmedBehavior(enemy, data, delta);
    }
  }
}
```

### 3. Defensive (ë°©ì–´í˜•)

**íŠ¹ì§•**: í”¼í•´ ê°ì†Œ, ë°©ì–´ë§‰, íšŒë³µ

**ì˜ˆì‹œ**: íƒˆë ¹ ë§ˆìŠ¤í¬ (í”¼í•´ ê°ì†Œ)

```typescript
export class DefensiveArtifact extends BaseArtifact {
  private readonly DAMAGE_REDUCTION = 0.15; // 15% ê°ì†Œ

  public onTakeDamage(damage: number, source: Container): number {
    const reducedDamage = damage * (1 - this.DAMAGE_REDUCTION);

    // ë°©ì–´ ì´í™íŠ¸ í‘œì‹œ
    this.showShieldEffect();

    // ê°ì†Œëœ ë°ë¯¸ì§€ ë°˜í™˜
    return reducedDamage;
  }
}
```

### 4. Utility (ìœ í‹¸ë¦¬í‹°í˜•)

**íŠ¹ì§•**: ì´ë™ì†ë„, ê²½í—˜ì¹˜, ê³¨ë“œ, ë²”ìœ„

**ì˜ˆì‹œ**: ìŠ¤íƒ¯ ì¦ê°€ ìœ ë¬¼

```typescript
export class UtilityArtifact extends BaseArtifact {
  private readonly SPEED_BONUS = 1.2; // 20% ì¦ê°€

  public activate(player: Player, scene: IGameScene): void {
    super.activate(player, scene);

    // í”Œë ˆì´ì–´ ìŠ¤íƒ¯ ì¦ê°€
    player.moveSpeed *= this.SPEED_BONUS;
  }

  public deactivate(player: Player, scene: IGameScene): void {
    // ìŠ¤íƒ¯ ë³µêµ¬
    if (this.player) {
      this.player.moveSpeed /= this.SPEED_BONUS;
    }

    super.deactivate(player, scene);
  }
}
```

---

## ë¬´ê¸° ì§„í™” ìœ ë¬¼ êµ¬í˜„

### ê°œìš”

íŠ¹ì • ë¬´ê¸°ë¥¼ ì§„í™”ì‹œí‚¤ëŠ” ìœ ë¬¼ì€ ë‹¤ìŒ ë‘ ê°€ì§€ ì—­í• ì„ í•©ë‹ˆë‹¤:

1. **ì§„í™” ì¡°ê±´ ì¶©ì¡±**: ë¬´ê¸° ë ˆë²¨ 7 + ìœ ë¬¼ ë³´ìœ 
2. **ì§„í™” íŠ¸ë¦¬ê±°**: `weaponEvolution.ts`ì˜ ì§„í™” ë§µì— ë“±ë¡

### ì§„í™” ìœ ë¬¼ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìœ ë¬¼ í´ë˜ìŠ¤ ìƒì„± (`src/game/artifacts/list/[Name].ts`)
- [ ] ì—ì…‹ ì¶”ê°€ (`LOCAL_ASSETS`ì— ì•„ì´ì½˜, ì§„í™” ë¬´ê¸° ìŠ¤í”„ë¼ì´íŠ¸)
- [ ] ì§„í™” ë§µ ë“±ë¡ (`src/game/data/weaponEvolution.ts`)
- [ ] ì§„í™” ë¬´ê¸° í´ë˜ìŠ¤ ìƒì„± (`src/game/weapons/evolved/[Name].ts`)
- [ ] ë°¸ëŸ°ìŠ¤ ì„¤ì • (`config/balance.config.ts` - WEAPON_EVOLUTION_BALANCE)

### Step 1: ì§„í™” ìœ ë¬¼ í´ë˜ìŠ¤ ìƒì„±

```typescript
/**
 * ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘ ìœ ë¬¼
 * ì •í™”ìˆ˜ ë¬´ê¸° ì§„í™” ì¡°ê±´
 */

import { LOCAL_ASSETS } from '@config/assets.config';

import { BaseArtifact } from '../base/BaseArtifact';

export class CeladonCraneVaseArtifact extends BaseArtifact {
  constructor() {
    super({
      id: 'celadon_crane_vase',
      name: 'ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘',
      tier: 3,
      rarity: 'epic',
      category: 'offensive',
      description: 'ì •í™”ìˆ˜ ë¬´ê¸°ë¥¼ ì§„í™”ì‹œí‚µë‹ˆë‹¤ (ë ˆë²¨ 7 í•„ìš”)',
      iconPath: LOCAL_ASSETS.celadonCraneVaseArtifact,
      color: 0x87ceeb, // í•˜ëŠ˜ìƒ‰
    });
  }

  // ì§„í™” ìœ ë¬¼ì€ ë³„ë„ ë¡œì§ì´ í•„ìš” ì—†ìŒ
  // weaponEvolution.tsì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨
}
```

### Step 2: ì—ì…‹ ë“±ë¡

**íŒŒì¼**: `src/config/assets.config.ts`

```typescript
export const LOCAL_ASSETS = {
  // ìœ ë¬¼ ì•„ì´ì½˜ (32x32)
  celadonCraneVaseArtifact: '/assets/artifacts/celadon-crane-vase.png',

  // ... ê¸°íƒ€ ì—ì…‹
} as const;
```

### Step 3: ì§„í™” ë§µ ë“±ë¡

**íŒŒì¼**: `src/game/data/weaponEvolution.ts`

```typescript
import { PurifyingWaterEvolvedWeapon } from '@game/weapons/evolved/PurifyingWaterEvolvedWeapon';

export const WEAPON_EVOLUTION_MAP: Record<string, WeaponEvolutionData> = {
  weapon_purifying_water: {
    weaponId: 'weapon_purifying_water',
    requiredLevel: 7,
    requiredArtifactId: 'celadon_crane_vase', // ìœ ë¬¼ IDì™€ ì¼ì¹˜!
    evolvedWeaponName: 'ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘',
    evolvedWeaponFactory: PurifyingWaterEvolvedWeapon,
    enabled: true,
  },
};
```

### Step 4: ì§„í™” ë¬´ê¸° í´ë˜ìŠ¤ ìƒì„±

**íŒŒì¼**: `src/game/weapons/evolved/PurifyingWaterEvolvedWeapon.ts`

```typescript
/**
 * ì •í™”ìˆ˜ ì§„í™” ë¬´ê¸° - ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘
 *
 * íƒ€ì…: íˆ¬ì²™í˜• (Throwable)
 * ì§„í™” ì¡°ê±´: ì •í™”ìˆ˜ ë ˆë²¨ 7 + ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘ ìœ ë¬¼ ë³´ìœ 
 * ê°•í™” íš¨ê³¼: ë°ë¯¸ì§€ 140%, ë²”ìœ„ ì¦ê°€, íˆ¬ì²™ ê°œìˆ˜ ì¦ê°€, ì§€ì†ì‹œê°„ ì¦ê°€, í”Œë ˆì´ì–´ ê·€í™˜
 */
import { LOCAL_ASSETS } from '@config/assets.config';
import { WEAPON_BALANCE, WEAPON_EVOLUTION_BALANCE } from '@config/balance.config';
import { calculateWeaponStats } from '@game/data/weapons';
import type { BaseEnemy } from '@game/entities/enemies';
import type { Player } from '@game/entities/Player';
import type { WaterBottle } from '@game/entities/WaterBottle';
import type { WaterSplash } from '@game/entities/WaterSplash';
import type { Vector2 } from '@type/game.types';

import { PurifyingWaterWeapon } from '../PurifyingWaterWeapon';

export class PurifyingWaterEvolvedWeapon extends PurifyingWaterWeapon {
  // ì§„í™” ë¬´ê¸° ë°¸ëŸ°ìŠ¤ (ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬)
  private readonly balance = WEAPON_EVOLUTION_BALANCE.purifying_water;

  constructor(baseLevel: number = 7) {
    super();

    // ì§„í™” ë¬´ê¸° í”Œë˜ê·¸ ì„¤ì •
    this.isEvolved = true;

    // ê¸°ì¡´ ë ˆë²¨ ë³µì›
    this.level = baseLevel;

    // ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸
    this.updateEvolvedStats();

    // ì´ë¦„ ë³€ê²½
    this.name = 'ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘';

    console.log(
      `âœ¨ [PurifyingWaterEvolved] ì •í™”ìˆ˜ ì§„í™”! Lv.${this.level}`
    );
  }

  /**
   * ì§„í™” ë¬´ê¸° ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸
   */
  private updateEvolvedStats(): void {
    const stats = calculateWeaponStats('purifying_water', this.level);
    const config = WEAPON_BALANCE.purifying_water;

    // ë°ë¯¸ì§€ ì¦ê°€
    this.damage = stats.damage * this.balance.damageMultiplier;

    // ë²”ìœ„ ì¦ê°€
    const aoeSteps = Math.floor((this.level - 1) / config.levelScaling.aoeRadiusIncreaseInterval);
    const baseRadius = config.aoeRadius + aoeSteps * config.levelScaling.aoeRadiusPerLevel;
    this.aoeRadius = baseRadius * this.balance.aoeMultiplier;
  }

  /**
   * ë¬¼ë³‘ ë°œì‚¬ (ì§„í™” ì—ì…‹ ì ìš©)
   */
  public async fire(
    playerPos: Vector2,
    enemies: BaseEnemy[],
    player?: Player
  ): Promise<WaterBottle[]> {
    // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ fire í˜¸ì¶œ
    const bottles = await super.fire(playerPos, enemies, player);

    // ì§„í™” ì—ì…‹ìœ¼ë¡œ êµì²´ (ë§¤ë³‘ ì—ì…‹)
    for (const bottle of bottles) {
      await bottle.loadSprite(LOCAL_ASSETS.celadonCraneVaseArtifact);
    }

    return bottles;
  }

  /**
   * ë ˆë²¨ì—… (ì§„í™” ë¬´ê¸° ë°°ìœ¨ ì ìš©)
   */
  public levelUp(): void {
    this.level++;
    this.updateEvolvedStats();

    console.log(
      `âœ¨ [PurifyingWaterEvolved] ë ˆë²¨ ${this.level}!`
    );
  }
}
```

### Step 5: ë°¸ëŸ°ìŠ¤ ì„¤ì •

**íŒŒì¼**: `src/config/balance.config.ts`

```typescript
export const WEAPON_EVOLUTION_BALANCE = {
  purifying_water: {
    damageMultiplier: 1.4,        // 140% ë°ë¯¸ì§€
    aoeMultiplier: 1.2,           // 120% ë²”ìœ„
    throwIncrease: 1,             // +1 íˆ¬ì²™
    maxThrowIncrease: 1,          // ìµœëŒ€ +1
    lifetimeMultiplier: 1.5,      // 150% ì§€ì†ì‹œê°„
    returnSpeed: 200,             // ê·€í™˜ ì†ë„ (px/s)
  },
  // ... ë‹¤ë¥¸ ì§„í™” ë¬´ê¸°ë“¤
} as const;
```

### ì§„í™” ì‹œìŠ¤í…œ ë™ì‘ íë¦„

```
1. í”Œë ˆì´ì–´ê°€ ìœ ë¬¼ íšë“
   â””â”€> artifactSystem.grantArtifact('celadon_crane_vase')

2. ë¬´ê¸°ê°€ ë ˆë²¨ 7 ë„ë‹¬
   â””â”€> weapon.levelUp() -> level = 7

3. ì§„í™” ì¡°ê±´ ì²´í¬ (ë§¤ í”„ë ˆì„)
   â””â”€> canEvolve(weaponId, level, artifactIds)
       â””â”€> level >= 7 && artifactIds.includes('celadon_crane_vase')

4. ì§„í™” íŠ¸ë¦¬ê±°
   â””â”€> evolveWeapon(weapon, player)
       â””â”€> weapon.onBeforeEvolution?.() // ì •ë¦¬
       â””â”€> new PurifyingWaterEvolvedWeapon(weapon.level)
       â””â”€> weapon.onAfterEvolution?.() // ì´ˆê¸°í™”

5. ì§„í™” ì™„ë£Œ
   â””â”€> ë¬´ê¸° êµì²´, ì—ì…‹ ë³€ê²½, ìŠ¤íƒ¯ ì¦ê°€
```

---

## ì˜ˆì œ ì½”ë“œ

### ì˜ˆì œ 1: ê°„ë‹¨í•œ ê³µê²©í˜• ìœ ë¬¼ (í™•ë¥  íš¨ê³¼)

```typescript
/**
 * ë¶ˆê½ƒì˜ ì¸ì¥ ìœ ë¬¼
 * 10% í™•ë¥ ë¡œ ì  ì í™” (3ì´ˆê°„ DoT)
 */

import { LOCAL_ASSETS } from '@config/assets.config';
import type { WeaponCategory } from '@game/data/weapons';
import type { BaseEnemy } from '@game/entities/enemies/BaseEnemy';
import type { StatusEffect } from '@type/status-effect.types';

import { BaseArtifact } from '../base/BaseArtifact';

export class FireSealArtifact extends BaseArtifact {
  // ë°¸ëŸ°ìŠ¤ ìƒìˆ˜
  private readonly IGNITE_CHANCE = 0.1;     // 10%
  private readonly IGNITE_DURATION = 3.0;   // 3ì´ˆ
  private readonly IGNITE_DPS = 20;         // ì´ˆë‹¹ 20 í”¼í•´

  constructor() {
    super({
      id: 'fire_seal',
      name: 'ë¶ˆê½ƒì˜ ì¸ì¥',
      tier: 2,
      rarity: 'rare',
      category: 'offensive',
      description: 'ì ì„ ë§ì¶œ ë•Œ 10% í™•ë¥ ë¡œ 3ì´ˆê°„ ì í™” (ì´ˆë‹¹ 20 í”¼í•´)',
      iconPath: LOCAL_ASSETS.fireSealArtifact,
      color: 0xff4500,
    });
  }

  public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
    // í™•ë¥  ì²´í¬
    if (Math.random() >= this.IGNITE_CHANCE) return;

    // ìƒíƒœ ì´ìƒ ì ìš©
    const statusEffect: StatusEffect = {
      type: 'ignited',
      duration: this.IGNITE_DURATION,
      startTime: performance.now(),
      source: this.data.id,
      data: { dps: this.IGNITE_DPS },
    };

    enemy.addStatusEffect(statusEffect);

    console.log(`ğŸ”¥ [FireSeal] Enemy ignited!`);
  }
}
```

### ì˜ˆì œ 2: ë³µì¡í•œ ë””ë²„í”„ ìœ ë¬¼ (ë§¤í˜¹ + AI ì œì–´)

êµ¬ë¯¸í˜¸ì˜ ëˆˆë¬¼ ì „ì²´ ì½”ë“œ ì°¸ì¡°:
- [FoxTearArtifact.ts](../../src/game/artifacts/list/FoxTearArtifact.ts)

**í•µì‹¬ íŒ¨í„´**:
1. `Map<BaseEnemy, Data>` êµ¬ì¡°ë¡œ ë‹¤ì¤‘ ëŒ€ìƒ ì¶”ì 
2. `update(delta)` ë£¨í”„ì—ì„œ AI í–‰ë™ ì œì–´
3. `cleanup()` ë©”ì„œë“œë¡œ interval, ì‹œê° íš¨ê³¼ ì •ë¦¬
4. ìƒíƒœ ì´ìƒ ì‹œìŠ¤í…œ ì—°ë™ (`addStatusEffect`, `hasStatusEffect`)

### ì˜ˆì œ 3: ì‹œê° íš¨ê³¼ê°€ ìˆëŠ” ìœ ë¬¼ (ì²˜í˜• ì´í™íŠ¸)

```typescript
/**
 * ì²˜í˜• ì´í™íŠ¸ (AnimatedSprite)
 */
private async showExecuteEffect(x: number, y: number, parent: Container): Promise<void> {
  try {
    // ìŠ¤í”„ë¼ì´íŠ¸ì‹œíŠ¸ ë¡œë“œ
    const texture = await Assets.load(LOCAL_ASSETS.executionEffect);

    // í”„ë ˆì„ ìƒì„± (69x60, 30í”„ë ˆì„, 6ì—´)
    const frameWidth = 69;
    const frameHeight = 60;
    const totalFrames = 30;
    const columns = 6;

    const frames: Texture[] = [];
    for (let i = 0; i < totalFrames; i++) {
      const col = i % columns;
      const row = Math.floor(i / columns);
      const frameX = col * frameWidth;
      const frameY = row * frameHeight;

      const frame = new Texture({
        source: texture.source,
        frame: new Rectangle(frameX, frameY, frameWidth, frameHeight),
      });
      frames.push(frame);
    }

    // ì• ë‹ˆë©”ì´ì…˜ ìƒì„±
    const executionEffect = new AnimatedSprite(frames);
    executionEffect.anchor.set(0.5);
    executionEffect.x = x;
    executionEffect.y = y;
    executionEffect.scale.set(2.0);
    executionEffect.animationSpeed = 0.5;
    executionEffect.loop = false;
    executionEffect.zIndex = 1000;

    parent.addChild(executionEffect);
    executionEffect.play();

    // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ ì •ë¦¬
    executionEffect.onComplete = () => {
      if (!executionEffect.destroyed) {
        executionEffect.destroy({ children: true });
      }
    };
  } catch (error) {
    console.error('[ExecuteEffect] Load failed:', error);
  }
}
```

---

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. ë°¸ëŸ°ìŠ¤ ìƒìˆ˜ ê´€ë¦¬

```typescript
// âœ… Good: private readonlyë¡œ ë¶ˆë³€ì„± ë³´ì¥
export class GoodArtifact extends BaseArtifact {
  private readonly DAMAGE_BONUS = 1.5;
  private readonly TRIGGER_CHANCE = 0.1;
}

// âŒ Bad: ë§¤ì§ ë„˜ë²„, ë³€ê²½ ê°€ëŠ¥
export class BadArtifact extends BaseArtifact {
  public onHit(enemy: BaseEnemy) {
    if (Math.random() < 0.1) { // ë§¤ì§ ë„˜ë²„
      enemy.takeDamage(damage * 1.5);
    }
  }
}
```

### 2. ë©”ëª¨ë¦¬ ê´€ë¦¬

```typescript
// âœ… Good: cleanupì—ì„œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì •ë¦¬
public cleanup(): void {
  super.cleanup();

  // íƒ€ì´ë¨¸ ì •ë¦¬
  if (this.interval) clearInterval(this.interval);

  // ì‹œê° íš¨ê³¼ ì œê±°
  this.effects.forEach(e => e.destroy());

  // ì»¬ë ‰ì…˜ ë¹„ìš°ê¸°
  this.activeTargets.clear();
}

// âŒ Bad: ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜
public cleanup(): void {
  super.cleanup();
  // interval, effectsê°€ ì •ë¦¬ë˜ì§€ ì•ŠìŒ!
}
```

### 3. ì¡°ê±´ ê²€ì¦ ìˆœì„œ

```typescript
// âœ… Good: ë¹ ë¥¸ ì²´í¬ë¥¼ ë¨¼ì € (Early Return)
public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
  // 1. ê°€ì¥ ë¹ ë¥¸ ì²´í¬: ì¹´í…Œê³ ë¦¬
  if (!weaponCategories?.includes('projectile')) return;

  // 2. í™•ë¥  ì²´í¬ (Math.randomì€ ì €ë ´)
  if (Math.random() >= this.CHANCE) return;

  // 3. ë¹„ìš© ë†’ì€ ì²´í¬: ì  ìƒíƒœ
  if (enemy.hasStatusEffect('immune')) return;

  // 4. ì‹¤ì œ ë¡œì§ (ë¬´ê±°ìš´ ì—°ì‚°)
  this.applyComplexEffect(enemy);
}
```

### 4. íƒ€ì… ì•ˆì „ì„±

```typescript
// âœ… Good: ì˜µì…”ë„ íŒŒë¼ë¯¸í„° ê²€ì¦
public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
  if (!weaponCategories) return;

  if (weaponCategories.includes('projectile')) {
    // ì•ˆì „í•˜ê²Œ ì‚¬ìš©
  }
}

// âŒ Bad: ê²€ì¦ ì—†ì´ ì‚¬ìš© (ëŸ°íƒ€ì„ ì—ëŸ¬ ìœ„í—˜)
public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
  if (weaponCategories.includes('projectile')) { // weaponCategoriesê°€ undefinedë©´ ì—ëŸ¬!
    // ...
  }
}
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ìœ ë¬¼ì´ í™œì„±í™”ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: `initializeArtifacts()`ì— ë“±ë¡ ì•ˆë¨

**í•´ê²°**:
```typescript
// OverworldGameScene.ts
private initializeArtifacts(): void {
  this.artifactSystem.registerArtifact(new YourArtifact()); // ì¶”ê°€!
}
```

### ë¬¸ì œ 2: ì§„í™”ê°€ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: ì§„í™” ë§µì˜ IDê°€ ìœ ë¬¼ IDì™€ ë¶ˆì¼ì¹˜

**í•´ê²°**:
```typescript
// weaponEvolution.ts
weapon_purifying_water: {
  requiredArtifactId: 'celadon_crane_vase', // ìœ ë¬¼ constructorì˜ idì™€ ì¼ì¹˜í•´ì•¼ í•¨!
}

// CeladonCraneVaseArtifact.ts
constructor() {
  super({
    id: 'celadon_crane_vase', // ì—¬ê¸°ì™€ ì¼ì¹˜!
  });
}
```

### ë¬¸ì œ 3: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ (FPS ì €í•˜)

**ì›ì¸**: cleanup()ì—ì„œ interval, ì‹œê° íš¨ê³¼ ì •ë¦¬ ì•ˆë¨

**í•´ê²°**:
```typescript
public cleanup(): void {
  super.cleanup();

  // interval ì •ë¦¬
  if (this.updateInterval) {
    clearInterval(this.updateInterval);
    this.updateInterval = null;
  }

  // ì‹œê° íš¨ê³¼ ì •ë¦¬
  this.visualEffects.forEach(effect => {
    if (!effect.destroyed) {
      effect.destroy({ children: true });
    }
  });
  this.visualEffects.clear();
}
```

### ë¬¸ì œ 4: onHitì´ ë„ˆë¬´ ìì£¼ í˜¸ì¶œë¨ (ì„±ëŠ¥ ì €í•˜)

**ì›ì¸**: ì¡°ê±´ ê²€ì¦ ìˆœì„œê°€ ë¹„íš¨ìœ¨ì 

**í•´ê²°**:
```typescript
// âœ… Good: ë¹ ë¥¸ ì²´í¬ë¥¼ ë¨¼ì €
public onHit(enemy: BaseEnemy, damage: number, weaponCategories?: WeaponCategory[]): void {
  // 1. ê°€ì¥ ë¹ ë¥¸ ì²´í¬
  if (!weaponCategories?.includes('melee')) return;

  // 2. í™•ë¥  ì²´í¬
  if (Math.random() >= 0.1) return;

  // 3. ë¬´ê±°ìš´ ë¡œì§ (ìœ„ ì¡°ê±´ì„ í†µê³¼í•œ ê²½ìš°ë§Œ)
  this.expensiveOperation(enemy);
}
```

---

## ì°¸ê³  ìë£Œ

- [ë¬´ê¸° êµ¬í˜„ ê°€ì´ë“œ](./weapon-implementation-guide.md)
- [ìƒíƒœ ì´ìƒ ì‹œìŠ¤í…œ](../../src/type/status-effect.types.ts)
- [BaseArtifact ì†ŒìŠ¤ì½”ë“œ](../../src/game/artifacts/base/BaseArtifact.ts)
- [IArtifact ì¸í„°í˜ì´ìŠ¤](../../src/game/artifacts/base/IArtifact.ts)
- [ì§„í™” ì‹œìŠ¤í…œ ë°ì´í„°](../../src/game/data/weaponEvolution.ts)

---

**ì‘ì„±ì¼**: 2025-01-XX
**ë²„ì „**: 1.0
**ì‘ì„±ì**: Claude Code
